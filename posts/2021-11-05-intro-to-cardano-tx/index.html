<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Introduction to Cardano components | mzfr's blog</title><meta name=keywords content="cardano,NFT"><meta name=description content="A few months ago one of my friends asked me to help him mint some NFT on the Cardano blockchain. At that point, I had no idea how transactions work on Cardano and how to actually mint any NFT on it. So I started reading all the blog posts I could find and started banging my head on the Cardano documentation.
Now I&rsquo;m writing this series (hopefully) of blog posts because I had to learn things from different places and couldn&rsquo;t find everything in the Cardano documentation because it&rsquo;s not very frequently updated."><meta name=author content><link rel=canonical href=https://blog.mzfr.me/posts/2021-11-05-intro-to-cardano-tx/><link crossorigin=anonymous href=/assets/css/stylesheet.eada69fd0a09c054310631fda560c45364d1f38af1bab53623c2f4013a9119d2.css integrity="sha256-6tpp/QoJwFQxBjH9pWDEU2TR84rxurU2I8L0ATqRGdI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.mzfr.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.mzfr.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.mzfr.me/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.mzfr.me/apple-touch-icon.png><link rel=mask-icon href=https://blog.mzfr.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src=https://analytics.mzfr.me/script.js data-website-id=10e5d04b-13bb-4110-99b2-8c72f8854043></script><meta property="og:title" content="Introduction to Cardano components"><meta property="og:description" content="A few months ago one of my friends asked me to help him mint some NFT on the Cardano blockchain. At that point, I had no idea how transactions work on Cardano and how to actually mint any NFT on it. So I started reading all the blog posts I could find and started banging my head on the Cardano documentation.
Now I&rsquo;m writing this series (hopefully) of blog posts because I had to learn things from different places and couldn&rsquo;t find everything in the Cardano documentation because it&rsquo;s not very frequently updated."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.mzfr.me/posts/2021-11-05-intro-to-cardano-tx/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-05T00:00:00+00:00"><meta property="article:modified_time" content="2021-11-05T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Introduction to Cardano components"><meta name=twitter:description content="A few months ago one of my friends asked me to help him mint some NFT on the Cardano blockchain. At that point, I had no idea how transactions work on Cardano and how to actually mint any NFT on it. So I started reading all the blog posts I could find and started banging my head on the Cardano documentation.
Now I&rsquo;m writing this series (hopefully) of blog posts because I had to learn things from different places and couldn&rsquo;t find everything in the Cardano documentation because it&rsquo;s not very frequently updated."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://blog.mzfr.me/posts/"},{"@type":"ListItem","position":3,"name":"Introduction to Cardano components","item":"https://blog.mzfr.me/posts/2021-11-05-intro-to-cardano-tx/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Introduction to Cardano components","name":"Introduction to Cardano components","description":"A few months ago one of my friends asked me to help him mint some NFT on the Cardano blockchain. At that point, I had no idea how transactions work on Cardano and how to actually mint any NFT on it. So I started reading all the blog posts I could find and started banging my head on the Cardano documentation.\nNow I\u0026rsquo;m writing this series (hopefully) of blog posts because I had to learn things from different places and couldn\u0026rsquo;t find everything in the Cardano documentation because it\u0026rsquo;s not very frequently updated.","keywords":["cardano","NFT"],"articleBody":"A few months ago one of my friends asked me to help him mint some NFT on the Cardano blockchain. At that point, I had no idea how transactions work on Cardano and how to actually mint any NFT on it. So I started reading all the blog posts I could find and started banging my head on the Cardano documentation.\nNow I’m writing this series (hopefully) of blog posts because I had to learn things from different places and couldn’t find everything in the Cardano documentation because it’s not very frequently updated. I believe the main reason for that is because Cardano is under very active development so most of the time devs focus on making the application instead of updating the documentation.\nThese blog posts will be my way of sharing the knowledge I’ve gained over these few months and probably help the newcomers planning to start in these.\nWhat is Cardano? According to cardano.org\nCardano is a blockchain platform for changemakers, innovators, and visionaries, with the tools and technologies required to create the possibility for the many, as well as the few, and bring about positive global change\nIn simple terms, it is one of the many blockchain platforms which has recently come into the limelight (I think). And is believed to be a competitor of ETH i.e do everything ETH can do but with less gas fee.\nWithout getting into the detail of why Cardano was made, how it’s different, etc. I’m just going to jump into how one can start their own cardano-node and then interact with using cardano-cli to submit transactions, mint/burn/evolve tokens.\nRunning own cardano-node In this, we are going to run our own testnet. But what is testnet?\nTo quote the cardano.org\nThe Cardano testnet offers full Cardano functionality, including stake pool operation, transaction metadata, native tokens, and more.\nBasically, on testnet we can do exactly what can be done in the real-world but without using any real money(ADA).\nBefore we start I’d also like to point out that the almost everything will be similar in case you decide to run the mainnet. And I’ll point out the things that could be different in the case of mainnet.\nStarting Testnet Go to releases page of the cardano-node repository. And in the download section you’ll see the Hydra binaries and the Configurations files.\nRemember to download configuration files for testnet and NOT mainnet. Only download the config, byronGenesis, ShelleyGenesis, alozonGenesis and topology. Store all the config files in a folder named configs We don’t need db-sync config and rest config for running the node. To start the node run the following command:\ncardano-node run \\ --topology ./configs/testnet-topology.json \\ --database-path ./db --port 3001 \\ --config ./configs/testnet-config.json \\ --socket-path testnet.socket --topology - path to the testnet-topology.json. This basically pushes the node alive message, showing that a new node has come into the network. --database-path - This can be any path. Basically here all synced node information will be stored. --config - path to the testnet config. --socket-path - the path where you want to create the testnet.socket If you are on windows then this will be changed to, --socket-path \\\\.\\\\pipe\\\\cardano-node --port - This can be any port you want. Now run the following command: export CARDANO_NODE_SOCKET_PATH=\"/path/to/your/testnet.socket\" If you are on Windows then run:\n$env:CARDANO_NODE_SOCKET_PATH='\\\\.\\\\pipe\\\\cardano-node' Remember the above commands will only set variables in your current shell and not globally. If you’d like to set variables globally then:\nFor Linux - add this (export CARDANO_NODE_SOCKET_PATH=\"/path/to/your/testnet.socket\") in your .bashrc/.zshrc For Windows - read this to see how to add Environment variables. Now you’ll have to wait for a few minutes and then run the following command: cardano-cli query tip --testnet-magic 1097911063 The testnet-magic number can be found in the testnet-shelley-genesis.json file.\nNow if everything was done correctly, then with the above command you must see something like:\n{ \"epoch\": 166, \"hash\": \"c4060a65975397e84a5f59f73e09c5f857339f661a7db7389e6f5b76cb75b89a\", \"slot\": 41764705, \"block\": 3049124, \"era\": \"Alonzo\", \"syncProgress\": \"100.00\" } The values might vary but if you get similar-looking output then your node is up and running and is being synced.\nNOTE: The testnet network takes about 4-5 hours to sync 100% and the mainnet network takes about 24 hours to sync.\nWhen you run the command given in step 4 and get an error saying something like:\ncardano-cli: Network.Socket.connect: : does not exist (Connection refused)% Then please wait for some time before re-trying the same command, sometimes it takes a bit longer to generate the socket file.\nCreate simple transactions In this blog post, we are only going to focus on transferring tADA(testing ADA) from one wallet to another wallet. In the future, I’ll explain on how to mint NFTs on the Cardano chain and how to transfer them.\nBut before we get into making transactions we need to generate a payment address.\nGenerating payment address Make a new directory called payment_addr1 mkdir -p $HOME/payment_addr1/ Now generate a payment key-pair cardano-cli address key-gen \\ --verification-key-file $HOME/payment_addr1/payment.vkey \\ --signing-key-file $HOME/payment_addr1/payment.skey Now using the above key-pair we can generate a wallet address cardano-cli address build \\ --payment-verification-key-file $HOME/payment_addr1/payment.vkey \\ --out-file $HOME/payment_addr1/payment.addr --testnet-magic 1097911063 I’d suggest generating another address (under payment_addr2) in a similar manner. This way you can perform all the transactions and see things happening.\nGetting tADA in the wallet Now that we have the wallet, you can run the following command to see if there are any tADA in your wallet (there shouldn’t be any)\ncardano-cli query utxo --address --testnet-magic 1097911063 You should see something like:\nTxHash TxIx Amount -------------------------------------------------------------------------------------- This shows that you don’t have any tADA in your wallet. Now to get some tADA to go to, testnet faucet and enter your wallet address. You don’t need an API key(it’s not compulsory to put it there). You can request any amount of tADA you want, for this tutorial we are going to request 20 tADA.\nOnce you’ve requested the funds, wait for a few minutes and run the following command:\ncardano-cli query utxo --address --testnet-magic 1097911063 you should see an output that looks like the following:\nTxHash TxIx Amount -------------------------------------------------------------------------------------- 4606b0a96e0b69569be47293fdfcebda19da3fd2b7c0066d695f13020663c524 1 20000000 lovelace + TxOutDatumHashNone What is a UTxO We requested 10 tADA but in the above output, we can see a TxHash, TxIx, and Amount. This as a whole is known as UTxO(Unspent Transaction Output). The concept of UTxO is taken from Bitcoin.\nA UTxO represents a Transaction that isn’t spent, hence the name unspent. This means that chain knows that in the whole network there is a UTxO with a certain unique identification (combination of TxHash \u0026 TxIx) which stores some unspent amount. Now, this UTxO(s) can be used to make transactions i.e to transfer the amount. The UTxO model in Cardano/BTC varies from what a chain like ETH uses. In ETH it’s what we are used to, A has 10 in their wallet and would like to send 5 to B, so when a transaction on ETH will be submitted it will reduce 5 from A and increase 5 on the B side. But a UTxO model doesn’t work like that. In a UTxO model, a whole UTxO is consumed when a transaction is submitted.\nEx: Say A has a UTxO with amount 10 tADA and would like to send 5 tADA to B and keep the remaining 5 tADA. Now in Cardano, a simple increment on B’s amount and decrement on A’s amount, won’t happen. Instead while making a transaction a UTxO(s) will be given as an input, which stores the 10 tADA. Once that transaction is submitted, that UTxO will be consumed completely and a new UTxO with the same TxHash but different TxIx will be generated. One of the UTxO will be present in A’s wallet showing 5 tADA remaining and another UTxO(same TxHash but different TxIx) will be shown in B’s wallet.\nNOTE: In the above example I’ve not considered the gas fee.\nUnderstanding UTxO can be a difficult task, if you like to further read about it then I’d suggest Cardano’s documentation on UTxO models\nAnd in the UTxO we see the amount written in Lovelace.\n1 ADA/tADA == 1000000 Lovelace\rSo when we transferred 20 tADA we got 20000000 Lovelace.\nMaking a transaction Now that we understand what a UTxO is and also have a proper setup of tools. We can start making transactions. There are 3 steps to submit a transaction:\nBuild a transaction: We provide the UTxO input and the output address along with the output and some other arguments. Sign a transaction: We then sign the transaction, to show that we actually own the UTxO which will be consumed. Submit the transaction Building a transaction In order to build a transaction we are going to use the following command:\ncardano-cli transaction build --alonzo-era \\ --tesnet-magic 1097911063 \\ --tx-in $TX_IN \\ --tx-out $ADDR+$AMOUNT \\ --change-address $OWN_ADDR \\ --out-file tx.raw --alonzo-era: This is the latest cardano era. You can also use --byron-era or --shelley-era but those might give errors.\n--testnet-magic: If we were on mainnet then this would have changed to --mainnet. And with mainnet we don’t need to provide any magic number.\n--tx-in: This is where we input the UTxO which has to be consumed.\nIn a single command, there can be as many --tx-in argument as you want. Ex: Say you want to send 5 tADA but you have 3 tADA in X UTxO and 2 tADA in Y UTxO, so you can give 2 --tx-in so both of them can be consumed. Another thing to remember is that the $TX_IN format would be TxHash#TxIx i.e if the TxHash was 4606b0a96e0b69569be47293fdfcebda19da3fd2b7c0066d695f13020663c524 and TxIx was 1 then we would write --tx-in 4606b0a96e0b69569be47293fdfcebda19da3fd2b7c0066d695f13020663c524#1, notice the #1 in the end. --tx-out: Here we will put the address of the person we want to send the amount along with the amount, separated by +.\nJust the way we can have multiple --tx-in in the same way we can have multiple --tx-out The format for --tx-out will be + Amount of ada has to be in Lovelace. --change-address: This will be the address to which the changes i.e the remaining amount, will be sent.\nSay you have 5 tADA in the UTxO and you’d like to transfer 3 tADA and would like to have 2 tADA back. So in the --change-address you can put your own address, so once the transaction is submitted 3 tADA will be transferred,~0.2 will be paid as the gas fee and the remaining 1.8 tADA(changes) will be sent back to you. --out-file: The output file which will hold all the transaction information.\nNow I’m going to use 20 tADA that I got from testnet faucet to build a transaction:\ncardano-cli transaction build --alonzo-era --tesnet-magic 1097911063 \\ --tx-in 4606b0a96e0b69569be47293fdfcebda19da3fd2b7c0066d695f13020663c524#1 \\ --tx-out $payment_addr2+10000000 --change-address $payment_addr1 --out-file tx.raw In the above transaction I’m sending 10 tADA from payment_addr1 -\u003e payment_addr2. When I ran the above command I got a file called tx.raw\nSigning a transaction Here we are going to sign the transaction which we generated in the building a transaction.\ncardano-cli transaction sign \\ --signing-key-file $HOME/payment_addr1/payment.skey \\ --testnet-magic 1097911063 --tx-body-file tx.raw --out-file tx.signed --signing-key-file: This is the argument in which we provide our wallet’s skey --tx-body-file: This takes the path to the file which we get from building a transaction. Ex: I’m going to sign the transaction which I built using the payment_addr1 skey. We have to use payment_addr1 keys because we are sending it from that wallet.\ncardano-cli transaction sign \\ --signing-key-file $HOME/payment_addr1/payment.skey \\ --testnet-magic 1097911063 --tx-body-file tx.raw --out-file tx.signed Submit a transaction This is probably the easiest step. Just run the following command:\ncardano-cli transaction submit --tx-file tx.signed --testnet-magic 1097911063 --tx-file: Path of the file which we got after we signed a transaction. Once we run that we will get the acknowledgment that the transaction is submitted successfully.\nSo this was all you need to do/know to get started with cardano-node and cardano-cli. In the next post, I’ll try to explain how to mint an NFT and how to transfer them between wallets.\nThanks for reading, feedback is always appreciated :)\nYou can follow me on @0xmzfr\n","wordCount":"2010","inLanguage":"en","datePublished":"2021-11-05T00:00:00Z","dateModified":"2021-11-05T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.mzfr.me/posts/2021-11-05-intro-to-cardano-tx/"},"publisher":{"@type":"Organization","name":"mzfr's blog","logo":{"@type":"ImageObject","url":"https://blog.mzfr.me/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.mzfr.me accesskey=h title="mzfr's blog (Alt + H)">mzfr's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.mzfr.me/ title=Home><span>Home</span></a></li><li><a href=https://blog.mzfr.me/about/ title=About><span>About</span></a></li><li><a href=https://wiki.mzfr.me title=Notes><span>Notes</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://blog.mzfr.me/ctf/ title=Writeups><span>Writeups</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Introduction to Cardano components</h1><div class=post-meta><span title='2021-11-05 00:00:00 +0000 UTC'>November 5, 2021</span>&nbsp;·&nbsp;10 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-is-cardano aria-label="What is Cardano?">What is Cardano?</a></li><li><a href=#running-own-cardano-node aria-label="Running own cardano-node">Running own cardano-node</a><ul><li><a href=#starting-testnet aria-label="Starting Testnet">Starting Testnet</a></li></ul></li><li><a href=#create-simple-transactions aria-label="Create simple transactions">Create simple transactions</a><ul><li><a href=#generating-payment-address aria-label="Generating payment address">Generating payment address</a></li><li><a href=#getting-tada-in-the-wallet aria-label="Getting tADA in the wallet">Getting tADA in the wallet</a></li><li><a href=#what-is-a-utxo aria-label="What is a UTxO">What is a UTxO</a></li><li><a href=#making-a-transaction aria-label="Making a transaction">Making a transaction</a><ul><li><a href=#building-a-transaction aria-label="Building a transaction">Building a transaction</a></li><li><a href=#signing-a-transaction aria-label="Signing a transaction">Signing a transaction</a></li><li><a href=#submit-a-transaction aria-label="Submit a transaction">Submit a transaction</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><p>A few months ago one of my friends asked me to help him mint some NFT on the Cardano blockchain. At that point, I had no idea how transactions work on Cardano and how to actually mint any NFT on it. So I started reading all the blog posts I could find and started banging my head on the Cardano documentation.</p><p>Now I&rsquo;m writing this series (hopefully) of blog posts because I had to learn things from different places and couldn&rsquo;t find everything in the Cardano documentation because it&rsquo;s not very frequently updated. I believe the main reason for that is because Cardano is under very active development so most of the time devs focus on making the application instead of updating the documentation.</p><p>These blog posts will be my way of sharing the knowledge I&rsquo;ve gained over these few months and probably help the newcomers planning to start in these.</p><h1 id=what-is-cardano>What is Cardano?<a hidden class=anchor aria-hidden=true href=#what-is-cardano>#</a></h1><p>According to <a href=https://cardano.org/>cardano.org</a></p><blockquote><p>Cardano is a blockchain platform for changemakers, innovators, and visionaries, with the tools and technologies required to create the possibility for the many, as well as the few, and bring about positive global change</p></blockquote><p>In simple terms, it is one of the many blockchain platforms which has recently come into the limelight (I think). And is believed to be a competitor of ETH i.e do everything ETH can do but with less gas fee.</p><p>Without getting into the detail of why Cardano was made, how it&rsquo;s different, etc. I&rsquo;m just going to jump into how one can start their own <a href=https://github.com/input-output-hk/cardano-node>cardano-node</a> and then interact with using <code>cardano-cli</code> to submit transactions, mint/burn/evolve tokens.</p><h1 id=running-own-cardano-node>Running own cardano-node<a hidden class=anchor aria-hidden=true href=#running-own-cardano-node>#</a></h1><p>In this, we are going to run our own <code>testnet</code>. But what is <code>testnet</code>?</p><p>To quote the <code>cardano.org</code></p><blockquote><p>The Cardano testnet offers full Cardano functionality, including stake pool operation, transaction metadata, native tokens, and more.</p></blockquote><p>Basically, on testnet we can do exactly what can be done in the real-world but without using any real money(ADA).</p><p>Before we start I&rsquo;d also like to point out that the almost everything will be similar in case you decide to run the <code>mainnet</code>. And I&rsquo;ll point out the things that could be different in the case of mainnet.</p><h2 id=starting-testnet>Starting Testnet<a hidden class=anchor aria-hidden=true href=#starting-testnet>#</a></h2><ol><li><p>Go to <a href=https://github.com/input-output-hk/cardano-node/releases>releases page</a> of the <a href=https://github.com/input-output-hk/cardano-node/>cardano-node</a> repository. And in the <code>download</code> section you&rsquo;ll see the <code>Hydra binaries</code> and the <code>Configurations files</code>.</p><ul><li>Remember to download configuration files for <code>testnet</code> and <strong>NOT</strong> mainnet.</li><li>Only download the <code>config</code>, <code>byronGenesis</code>, <code>ShelleyGenesis</code>, <code>alozonGenesis</code> and <code>topology</code>.</li><li>Store all the config files in a folder named <code>configs</code></li><li>We <strong>don&rsquo;t</strong> need <code>db-sync config</code> and <code>rest config</code> for running the node.</li></ul></li><li><p>To start the node run the following command:</p></li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cardano-node run <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --topology ./configs/testnet-topology.json <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --database-path ./db --port <span style=color:#d19a66>3001</span> <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --config ./configs/testnet-config.json <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --socket-path testnet.socket
</span></span></code></pre></div><ul><li><code>--topology</code> - path to the <code>testnet-topology.json</code>. This basically pushes the node alive message, showing that a new node has come into the network.</li><li><code>--database-path</code> - This can be any path. Basically here all synced node information will be stored.</li><li><code>--config</code> - path to the testnet config.</li><li><code>--socket-path</code> - the path where you want to create the <code>testnet.socket</code><ul><li>If you are on windows then this will be changed to, <code>--socket-path \\.\\pipe\\cardano-node</code></li></ul></li><li><code>--port</code> - This can be any port you want.</li></ul><ol start=3><li>Now run the following command:</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> <span style=color:#ef8383>export</span> <span style=color:#dcaeea>CARDANO_NODE_SOCKET_PATH</span><span style=color:#c7bf54>=</span><span style=color:#63c381>&#34;/path/to/your/testnet.socket&#34;</span>
</span></span></code></pre></div><p>If you are on Windows then run:</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#dcaeea>$env</span>:CARDANO_NODE_SOCKET_PATH<span style=color:#c7bf54>=</span><span style=color:#98c379>&#39;\\.\\pipe\\cardano-node&#39;</span>
</span></span></code></pre></div><p>Remember the above commands will only set variables in your current shell and not globally. If you&rsquo;d like to set variables globally then:</p><ul><li>For Linux - add this (<code>export CARDANO_NODE_SOCKET_PATH="/path/to/your/testnet.socket"</code>) in your .bashrc/.zshrc</li><li>For Windows - read <a href=https://www.architectryan.com/2018/08/31/how-to-change-environment-variables-on-windows-10/>this</a> to see how to add Environment variables.</li></ul><ol start=4><li>Now you&rsquo;ll have to wait for a few minutes and then run the following command:</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli query tip --testnet-magic <span style=color:#d19a66>1097911063</span>
</span></span></code></pre></div><p>The <code>testnet-magic</code> number can be found in the <code>testnet-shelley-genesis.json</code> file.</p><p>Now if everything was done correctly, then with the above command you must see something like:</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;epoch&#34;</span>: <span style=color:#d19a66>166</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;hash&#34;</span>: <span style=color:#63c381>&#34;c4060a65975397e84a5f59f73e09c5f857339f661a7db7389e6f5b76cb75b89a&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;slot&#34;</span>: <span style=color:#d19a66>41764705</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;block&#34;</span>: <span style=color:#d19a66>3049124</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;era&#34;</span>: <span style=color:#63c381>&#34;Alonzo&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;syncProgress&#34;</span>: <span style=color:#63c381>&#34;100.00&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The values might vary but if you get similar-looking output then your node is up and running and is being synced.</p><p><strong>NOTE</strong>: The testnet network takes about 4-5 hours to sync 100% and the mainnet network takes about 24 hours to sync.</p><p>When you run the command given in step 4 and get an error saying something like:</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cardano-cli: Network.Socket.connect: &lt;socket: 11&gt;: does not exist (Connection refused)%
</span></span></code></pre></div><p>Then please wait for some time before re-trying the same command, sometimes it takes a bit longer to generate the <code>socket</code> file.</p><h1 id=create-simple-transactions>Create simple transactions<a hidden class=anchor aria-hidden=true href=#create-simple-transactions>#</a></h1><p>In this blog post, we are only going to focus on transferring tADA(testing ADA) from one wallet to another wallet. In the future, I&rsquo;ll explain on how to mint NFTs on the Cardano chain and how to transfer them.</p><p>But before we get into making transactions we need to generate a payment address.</p><h2 id=generating-payment-address>Generating payment address<a hidden class=anchor aria-hidden=true href=#generating-payment-address>#</a></h2><ol><li>Make a new directory called <code>payment_addr1</code></li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p <span style=color:#dcaeea>$HOME</span>/payment_addr1/
</span></span></code></pre></div><ol start=2><li>Now generate a payment key-pair</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli address key-gen <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --verification-key-file <span style=color:#dcaeea>$HOME</span>/payment_addr1/payment.vkey <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --signing-key-file <span style=color:#dcaeea>$HOME</span>/payment_addr1/payment.skey
</span></span></code></pre></div><ol start=3><li>Now using the above key-pair we can generate a wallet address</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli address build <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --payment-verification-key-file <span style=color:#dcaeea>$HOME</span>/payment_addr1/payment.vkey <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --out-file <span style=color:#dcaeea>$HOME</span>/payment_addr1/payment.addr --testnet-magic <span style=color:#d19a66>1097911063</span>
</span></span></code></pre></div><p>I&rsquo;d suggest generating another address (under <code>payment_addr2</code>) in a similar manner. This way you can perform all the transactions and see things happening.</p><h2 id=getting-tada-in-the-wallet>Getting tADA in the wallet<a hidden class=anchor aria-hidden=true href=#getting-tada-in-the-wallet>#</a></h2><p>Now that we have the wallet, you can run the following command to see if there are any tADA in your wallet (there shouldn&rsquo;t be any)</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli query utxo --address &lt;your_payment_addr1_address_here&gt; --testnet-magic <span style=color:#d19a66>1097911063</span>
</span></span></code></pre></div><p>You should see something like:</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>                           TxHash                                 TxIx        Amount
</span></span><span style=display:flex><span>--------------------------------------------------------------------------------------
</span></span></code></pre></div><p>This shows that you don&rsquo;t have any tADA in your wallet. Now to get some tADA to go to, <a href=https://testnets.cardano.org/en/testnets/cardano/tools/faucet/>testnet faucet</a> and enter your <code>wallet address</code>. You don&rsquo;t need an API key(it&rsquo;s not compulsory to put it there). You can request any amount of tADA you want, for this tutorial we are going to request <code>20 tADA</code>.</p><p>Once you&rsquo;ve requested the funds, wait for a few minutes and run the following command:</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli query utxo --address &lt;your_payment_addr1_address_here&gt; --testnet-magic <span style=color:#d19a66>1097911063</span>
</span></span></code></pre></div><p>you should see an output that looks like the following:</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>                           TxHash                                 TxIx        Amount
</span></span><span style=display:flex><span>--------------------------------------------------------------------------------------
</span></span><span style=display:flex><span>4606b0a96e0b69569be47293fdfcebda19da3fd2b7c0066d695f13020663c524     1        20000000 lovelace + TxOutDatumHashNone
</span></span></code></pre></div><h2 id=what-is-a-utxo>What is a UTxO<a hidden class=anchor aria-hidden=true href=#what-is-a-utxo>#</a></h2><p>We requested 10 tADA but in the above output, we can see a <code>TxHash</code>, <code>TxIx</code>, and <code>Amount</code>. This as a whole is known as UTxO(Unspent Transaction Output). The concept of UTxO is taken from Bitcoin.</p><p>A UTxO represents a Transaction that isn&rsquo;t spent, hence the name <code>unspent</code>. This means that chain knows that in the whole network there is a UTxO with a certain unique identification (combination of <code>TxHash</code> & <code>TxIx</code>) which stores some unspent amount. Now, this UTxO(s) can be used to make transactions i.e to transfer the amount. The UTxO model in Cardano/BTC varies from what a chain like ETH uses. In ETH it&rsquo;s what we are used to, A has 10 in their wallet and would like to send 5 to B, so when a transaction on ETH will be submitted it will reduce 5 from A and increase 5 on the B side. But a UTxO model <strong>doesn&rsquo;t</strong> work like that. In a UTxO model, a whole UTxO is consumed when a transaction is submitted.</p><p><strong>Ex</strong>: Say <strong>A</strong> has a UTxO with amount <code>10</code> tADA and would like to send 5 tADA to <strong>B</strong> and keep the remaining 5 tADA. Now in Cardano, a simple increment on B&rsquo;s amount and decrement on A&rsquo;s amount, won&rsquo;t happen. Instead while making a transaction a UTxO(s) will be given as an input, which stores the 10 tADA. Once that transaction is submitted, that UTxO will be consumed completely and a new UTxO with the same TxHash but different TxIx will be generated. One of the UTxO will be present in A&rsquo;s wallet showing 5 tADA remaining and another UTxO(same TxHash but different TxIx) will be shown in B&rsquo;s wallet.</p><p><strong>NOTE</strong>: In the above example I&rsquo;ve not considered the gas fee.</p><p>Understanding UTxO can be a difficult task, if you like to further read about it then I&rsquo;d suggest Cardano&rsquo;s documentation on <a href=https://developers.cardano.org/docs/stake-pool-course/handbook/utxo-model/>UTxO models</a></p><p>And in the UTxO we see the amount written in Lovelace.</p><pre><code>1 ADA/tADA == 1000000 Lovelace
</code></pre><p>So when we transferred 20 tADA we got <code>20000000</code> Lovelace.</p><h2 id=making-a-transaction>Making a transaction<a hidden class=anchor aria-hidden=true href=#making-a-transaction>#</a></h2><p>Now that we understand what a UTxO is and also have a proper setup of tools. We can start making transactions. There are 3 steps to submit a transaction:</p><ol><li>Build a transaction: We provide the UTxO input and the output address along with the output and some other arguments.</li><li>Sign a transaction: We then sign the transaction, to show that we actually own the UTxO which will be consumed.</li><li>Submit the transaction</li></ol><h3 id=building-a-transaction>Building a transaction<a hidden class=anchor aria-hidden=true href=#building-a-transaction>#</a></h3><p>In order to build a transaction we are going to use the following command:</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli transaction build --alonzo-era <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --tesnet-magic <span style=color:#d19a66>1097911063</span> <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --tx-in <span style=color:#dcaeea>$TX_IN</span> <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --tx-out <span style=color:#dcaeea>$ADDR</span>+<span style=color:#dcaeea>$AMOUNT</span> <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --change-address <span style=color:#dcaeea>$OWN_ADDR</span> <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --out-file tx.raw
</span></span></code></pre></div><ul><li><p><code>--alonzo-era</code>: This is the latest cardano era. You can also use <code>--byron-era</code> or <code>--shelley-era</code> but those might give errors.</p></li><li><p><code>--testnet-magic</code>: If we were on <code>mainnet</code> then this would have changed to <code>--mainnet</code>. And with mainnet we don&rsquo;t need to provide any magic number.</p></li><li><p><code>--tx-in</code>: This is where we input the UTxO which has to be consumed.</p><ul><li>In a single command, there can be as many <code>--tx-in</code> argument as you want.<ul><li><strong>Ex:</strong> Say you want to send 5 tADA but you have 3 tADA in X UTxO and 2 tADA in Y UTxO, so you can give 2 <code>--tx-in</code> so both of them can be consumed.</li></ul></li><li>Another thing to remember is that the <code>$TX_IN</code> format would be <strong>TxHash#TxIx</strong> i.e if the <code>TxHash</code> was <code>4606b0a96e0b69569be47293fdfcebda19da3fd2b7c0066d695f13020663c524</code> and <code>TxIx</code> was <code>1</code> then we would write <code>--tx-in 4606b0a96e0b69569be47293fdfcebda19da3fd2b7c0066d695f13020663c524#1</code>, notice the <code>#1</code> in the end.</li></ul></li><li><p><code>--tx-out</code>: Here we will put the address of the person we want to send the amount along with the amount, separated by <code>+</code>.</p><ul><li>Just the way we can have multiple <code>--tx-in</code> in the same way we can have multiple <code>--tx-out</code></li><li>The format for <code>--tx-out</code> will be <code>&lt;ADDR_TO_SEND_tADA>+&lt;AMOUNT_TO_BE_SENT></code></li><li>Amount of ada has to be in Lovelace.</li></ul></li><li><p><code>--change-address</code>: This will be the address to which the changes i.e the remaining amount, will be sent.</p><ul><li>Say you have 5 tADA in the UTxO and you&rsquo;d like to transfer 3 tADA and would like to have 2 tADA back. So in the <code>--change-address</code> you can put your own address, so once the transaction is submitted 3 tADA will be transferred,<code>~0.2</code> will be paid as the gas fee and the remaining 1.8 tADA(changes) will be sent back to you.</li></ul></li><li><p><code>--out-file</code>: The output file which will hold all the transaction information.</p></li></ul><p>Now I&rsquo;m going to use 20 tADA that I got from testnet faucet to build a transaction:</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli transaction build --alonzo-era --tesnet-magic <span style=color:#d19a66>1097911063</span> <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>     --tx-in 4606b0a96e0b69569be47293fdfcebda19da3fd2b7c0066d695f13020663c524#1 <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>     --tx-out <span style=color:#dcaeea>$payment_addr2</span>+10000000 --change-address <span style=color:#dcaeea>$payment_addr1</span> --out-file tx.raw
</span></span></code></pre></div><p>In the above transaction I&rsquo;m sending <code>10 tADA</code> from <code>payment_addr1</code> -> <code>payment_addr2</code>. When I ran the above command I got a file called <code>tx.raw</code></p><h3 id=signing-a-transaction>Signing a transaction<a hidden class=anchor aria-hidden=true href=#signing-a-transaction>#</a></h3><p>Here we are going to sign the transaction which we generated in the <a href=#building-a-transaction>building a transaction</a>.</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli transaction sign <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --signing-key-file <span style=color:#dcaeea>$HOME</span>/payment_addr1/payment.skey <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --testnet-magic <span style=color:#d19a66>1097911063</span> --tx-body-file tx.raw --out-file tx.signed
</span></span></code></pre></div><ul><li><code>--signing-key-file</code>: This is the argument in which we provide our wallet&rsquo;s <code>skey</code></li><li><code>--tx-body-file</code>: This takes the path to the file which we get from <code>building a transaction</code>.</li></ul><p><strong>Ex:</strong> I&rsquo;m going to sign the transaction which I built using the <code>payment_addr1</code> skey. We have to use <code>payment_addr1</code> keys because we are sending it from that wallet.</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli transaction sign <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --signing-key-file <span style=color:#dcaeea>$HOME</span>/payment_addr1/payment.skey <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>    --testnet-magic <span style=color:#d19a66>1097911063</span> --tx-body-file tx.raw --out-file tx.signed
</span></span></code></pre></div><h3 id=submit-a-transaction>Submit a transaction<a hidden class=anchor aria-hidden=true href=#submit-a-transaction>#</a></h3><p>This is probably the easiest step. Just run the following command:</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cardano-cli transaction submit --tx-file tx.signed --testnet-magic <span style=color:#d19a66>1097911063</span>
</span></span></code></pre></div><ul><li><code>--tx-file</code>: Path of the file which we got after we <code>signed a transaction.</code></li></ul><p>Once we run that we will get the acknowledgment that the transaction is submitted successfully.</p><hr><p>So this was all you need to do/know to get started with cardano-node and cardano-cli. In the next post, I&rsquo;ll try to explain how to mint an NFT and how to transfer them between wallets.</p><p>Thanks for reading, feedback is always appreciated :)</p><p>You can follow me on <a href=https://twitter.com/0xmzfr>@0xmzfr</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.mzfr.me/tags/cardano/>cardano</a></li><li><a href=https://blog.mzfr.me/tags/nft/>NFT</a></li></ul><nav class=paginav><a class=prev href=https://blog.mzfr.me/posts/2021-12-31-year-in-review-2021/><span class=title>« Prev</span><br><span>Year In Review-2021</span></a>
<a class=next href=https://blog.mzfr.me/posts/2021-06-24-unexported-component/><span class=title>Next »</span><br><span>Gaining access to protected components</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.mzfr.me>mzfr's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>